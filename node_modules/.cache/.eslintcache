[{"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\index.js":"1","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\App.jsx":"2","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\utils\\constants.js":"3","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\lib\\customHooks.js":"4","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\updateBook\\UpdateBook.jsx":"5","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\AddBook\\AddBook.jsx":"6","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\Book\\Book.jsx":"7","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Header\\Header.jsx":"8","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Footer\\Footer.jsx":"9","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\lib\\common.js":"10","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Books\\BestRatedBooks\\BestRatedBooks.jsx":"11","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Books\\BookItem\\BookItem.jsx":"12","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Books\\BookInfo\\BookInfo.jsx":"13","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Books\\BookRatingForm\\BookRatingForm.jsx":"14","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Books\\BookForm\\BookForm.jsx":"15","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\lib\\functions.jsx":"16","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\SignIn\\SignIn.jsx":"17","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\Login\\Login.jsx":"18","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\Forget\\Forget.jsx":"19","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\RegisterSend\\RegisterSend.jsx":"20","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\ForgetSend\\ForgetSend.jsx":"21","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\DropdownMenu\\DropdownMenu.jsx":"22","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\DropdownYear\\DropdownYear.jsx":"23","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\BackArrow\\BackArrow.jsx":"24","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\reportWebVitals.js":"25","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\Forum\\Forum.jsx":"26","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\AddBook\\AddBook.jsx":"27","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\GenreSelector\\GenreSelector.jsx":"28","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\Account\\Account.jsx":"29","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\ChangePass\\ChangePass.jsx":"30","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\Home\\Home.jsx":"31","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Books\\LastBook\\LastBook.jsx":"32","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\Collection\\Collection.jsx":"33"},{"size":592,"mtime":1737874512635,"results":"34","hashOfConfig":"35"},{"size":2535,"mtime":1739627005709,"results":"36","hashOfConfig":"35"},{"size":947,"mtime":1739625179856,"results":"37","hashOfConfig":"35"},{"size":1336,"mtime":1739183956439,"results":"38","hashOfConfig":"35"},{"size":1754,"mtime":1739184015995,"results":"39","hashOfConfig":"35"},{"size":1396,"mtime":1739183990604,"results":"40","hashOfConfig":"35"},{"size":3754,"mtime":1739183998378,"results":"41","hashOfConfig":"35"},{"size":4754,"mtime":1739625215097,"results":"42","hashOfConfig":"35"},{"size":903,"mtime":1739283546904,"results":"43","hashOfConfig":"35"},{"size":4289,"mtime":1739183951264,"results":"44","hashOfConfig":"35"},{"size":648,"mtime":1739519302407,"results":"45","hashOfConfig":"35"},{"size":1472,"mtime":1739183908752,"results":"46","hashOfConfig":"35"},{"size":1082,"mtime":1739183900696,"results":"47","hashOfConfig":"35"},{"size":2030,"mtime":1739183917996,"results":"48","hashOfConfig":"35"},{"size":4013,"mtime":1739183889828,"results":"49","hashOfConfig":"35"},{"size":1678,"mtime":1739183964653,"results":"50","hashOfConfig":"35"},{"size":4212,"mtime":1739463536837,"results":"51","hashOfConfig":"35"},{"size":2867,"mtime":1739462996139,"results":"52","hashOfConfig":"35"},{"size":2567,"mtime":1739465033221,"results":"53","hashOfConfig":"35"},{"size":1012,"mtime":1739267062332,"results":"54","hashOfConfig":"35"},{"size":1007,"mtime":1739268700914,"results":"55","hashOfConfig":"35"},{"size":3216,"mtime":1739625546355,"results":"56","hashOfConfig":"35"},{"size":3855,"mtime":1739541982611,"results":"57","hashOfConfig":"35"},{"size":410,"mtime":1739283655958,"results":"58","hashOfConfig":"35"},{"size":375,"mtime":1739283682378,"results":"59","hashOfConfig":"35"},{"size":2590,"mtime":1739349615884,"results":"60","hashOfConfig":"35"},{"size":4640,"mtime":1739455010862,"results":"61","hashOfConfig":"35"},{"size":2499,"mtime":1739370606718,"results":"62","hashOfConfig":"35"},{"size":6140,"mtime":1739452516442,"results":"63","hashOfConfig":"35"},{"size":3433,"mtime":1739464901384,"results":"64","hashOfConfig":"35"},{"size":3145,"mtime":1739628152500,"results":"65","hashOfConfig":"35"},{"size":636,"mtime":1739514118254,"results":"66","hashOfConfig":"35"},{"size":2627,"mtime":1739626794038,"results":"67","hashOfConfig":"35"},{"filePath":"68","messages":"69","suppressedMessages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},"1wpwvv8",{"filePath":"72","messages":"73","suppressedMessages":"74","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","suppressedMessages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"78","messages":"79","suppressedMessages":"80","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"81","messages":"82","suppressedMessages":"83","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"84","messages":"85","suppressedMessages":"86","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"87","messages":"88","suppressedMessages":"89","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"90","usedDeprecatedRules":"71"},{"filePath":"91","messages":"92","suppressedMessages":"93","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","suppressedMessages":"96","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"97","messages":"98","suppressedMessages":"99","errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"100","usedDeprecatedRules":"71"},{"filePath":"101","messages":"102","suppressedMessages":"103","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"104","messages":"105","suppressedMessages":"106","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"107","messages":"108","suppressedMessages":"109","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"110","messages":"111","suppressedMessages":"112","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"113","usedDeprecatedRules":"71"},{"filePath":"114","messages":"115","suppressedMessages":"116","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"117","usedDeprecatedRules":"71"},{"filePath":"118","messages":"119","suppressedMessages":"120","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"121","messages":"122","suppressedMessages":"123","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"124","messages":"125","suppressedMessages":"126","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"127","messages":"128","suppressedMessages":"129","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"130","messages":"131","suppressedMessages":"132","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"133","messages":"134","suppressedMessages":"135","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"136","messages":"137","suppressedMessages":"138","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"139","messages":"140","suppressedMessages":"141","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"142","messages":"143","suppressedMessages":"144","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"145","messages":"146","suppressedMessages":"147","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"148","messages":"149","suppressedMessages":"150","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"151","messages":"152","suppressedMessages":"153","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"154","messages":"155","suppressedMessages":"156","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"157","messages":"158","suppressedMessages":"159","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"160","messages":"161","suppressedMessages":"162","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"163","messages":"164","suppressedMessages":"165","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"166","messages":"167","suppressedMessages":"168","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"169","messages":"170","suppressedMessages":"171","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\index.js",[],["172"],["173","174","175","176","177","178"],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\App.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\utils\\constants.js",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\lib\\customHooks.js",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\updateBook\\UpdateBook.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\AddBook\\AddBook.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\Book\\Book.jsx",["179"],["180"],"/* eslint-disable react/jsx-props-no-spreading */\n\nimport React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useUser } from '../../lib/customHooks';\nimport styles from './Book.module.css';\nimport { getBook, deleteBook } from '../../lib/common';\nimport BookInfo from '../../components/Books/BookInfo/BookInfo';\nimport BookRatingForm from '../../components/Books/BookRatingForm/BookRatingForm';\nimport BookDeleteImage from '../../images/book_delete.png';\nimport BestRatedBooks from '../../components/Books/BestRatedBooks/BestRatedBooks';\nimport BackArrow from '../../components/BackArrow/BackArrow';\n\nfunction Book() {\n  const { connectedUser, userLoading } = useUser();\n  const [book, setBook] = useState(null);\n  const [rating, setRating] = useState(0);\n  const [userRated, setUserRated] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  const params = useParams();\n\n  useEffect(() => {\n    async function getItem() {\n      const data = await getBook(params.id);\n      if (data) {\n        setBook(data);\n      }\n    }\n    getItem();\n  }, [params.id]);\n\n  useEffect(() => {\n    if (!userLoading && connectedUser && book?.title) {\n      const rate = book.ratings.find((elt) => elt.userId === connectedUser.userId);\n      if (rate) {\n        setUserRated(true);\n        setRating(parseInt(rate.grade, 10));\n        setLoading(false);\n      } else {\n        setUserRated(false);\n        setRating(0);\n        setLoading(false);\n      }\n    } else if (!userLoading && !connectedUser && book) {\n      setLoading(false);\n    }\n  }, [book, userLoading]);\n\n  const onDelete = async (e) => {\n    if (e.key && e.key !== 'Enter') {\n      return;\n    }\n    // eslint-disable-next-line no-restricted-globals\n    const check = confirm('Etes vous sûr de vouloir supprimer ce livre ?');\n    if (check) {\n      const del = await deleteBook(book.id);\n      if (del) {\n        setBook((oldValue) => ({ ...oldValue, delete: true }));\n      }\n    }\n  };\n\n  const loadingContent = (<h1>Chargement ...</h1>);\n\n  const bookContent = !loading && !book.delete ? (\n    <div>\n      <div className={styles.Book}>\n        <div className={styles.BookImage} style={{ backgroundImage: `url(\"${book.imageUrl}\")` }} />\n        <div className={styles.BookContent}>\n          {book?.userId === connectedUser?.userId ? (\n            <div className={styles.Owner}>\n              <p>Vous avez publié cet ouvrage, vous pouvez le :</p>\n              <p>\n                <Link to={`/livre/modifier/${book.id}`}>modifier</Link>\n                {' '}\n                <span tabIndex={0} role=\"button\" onKeyUp={onDelete} onClick={onDelete}>supprimer</span>\n                {' '}\n              </p>\n            </div>\n          ) : null}\n          <BookInfo book={book} />\n          <BookRatingForm\n            userRated={userRated}\n            userId={connectedUser?.userId}\n            rating={rating}\n            setRating={setRating}\n            setBook={setBook}\n            id={book.id}\n          />\n        </div>\n      </div>\n      <hr />\n      <BestRatedBooks />\n    </div>\n  ) : null;\n  const deletedContent = book?.delete ? (\n    <div className={styles.Deleted}>\n      <h1>{book.title}</h1>\n      <p>a bien été supprimé</p>\n      <img src={BookDeleteImage} alt={`Le livre ${book.title} a bien été supprimé`} />\n      <Link to=\"/\">\n        <button type=\"button\">{'Retour à l\\'accueil'}</button>\n      </Link>\n    </div>\n  ) : null;\n\n  return (\n    <div className=\"content-container\">\n      <BackArrow />\n      {loading ? loadingContent : null}\n      <div className={styles.BookContainer}>\n        {bookContent}\n      </div>\n      {book?.delete ? deletedContent : null}\n\n    </div>\n  );\n}\nexport default Book;\n","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Header\\Header.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Footer\\Footer.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\lib\\common.js",["181","182","183","184","185","186","187","188","189"],["190","191","192"],"import axios from 'axios';\nimport { API_ROUTES } from '../utils/constants';\n\nfunction formatBooks(bookArray) {\n  return bookArray.map((book) => {\n    const newBook = { ...book };\n    // eslint-disable-next-line no-underscore-dangle\n    newBook.id = newBook._id;\n    return newBook;\n  });\n}\n\nexport function storeInLocalStorage(token, userId) {\n  localStorage.setItem('token', token);\n  localStorage.setItem('userId', userId);\n}\n\nexport function getFromLocalStorage(item) {\n  return localStorage.getItem(item);\n}\n\nexport async function getAuthenticatedUser() {\n  const defaultReturnObject = { authenticated: false, user: null };\n  try {\n    const token = getFromLocalStorage('token');\n    const userId = getFromLocalStorage('userId');\n    if (!token) {\n      return defaultReturnObject;\n    }\n    return { authenticated: true, user: { userId, token } };\n  } catch (err) {\n    console.error('getAuthenticatedUser, Something Went Wrong', err);\n    return defaultReturnObject;\n  }\n}\n\nexport async function getBooks() {\n  try {\n    const response = await axios({\n      method: 'GET',\n      url: `${API_ROUTES.BOOKS}`,\n    });\n    // eslint-disable-next-line array-callback-return\n    const books = formatBooks(response.data);\n    return books;\n  } catch (err) {\n    console.error(err);\n    return [];\n  }\n}\n\nexport async function getBook(id) {\n  try {\n    const response = await axios({\n      method: 'GET',\n      url: `${API_ROUTES.BOOKS}/${id}`,\n    });\n    const book = response.data;\n    // eslint-disable-next-line no-underscore-dangle\n    book.id = book._id;\n    return book;\n  } catch (err) {\n    console.error(err);\n    return null;\n  }\n}\n\nexport async function getBestRatedBooks() {\n  try {\n    const response = await axios({\n      method: 'GET',\n      url: `${API_ROUTES.BEST_RATED}`,\n    });\n    return formatBooks(response.data);\n  } catch (e) {\n    console.error(e);\n    return [];\n  }\n}\nexport async function deleteBook(id) {\n  try {\n    await axios.delete(`${API_ROUTES.BOOKS}/${id}`, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`,\n      },\n    });\n    return true;\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\n\nexport async function rateBook(id, userId, rating) {\n  const data = {\n    userId,\n    rating: parseInt(rating, 10),\n  };\n\n  try {\n    const response = await axios.post(`${API_ROUTES.BOOKS}/${id}/rating`, data, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`,\n      },\n    });\n    const book = response.data;\n    // eslint-disable-next-line no-underscore-dangle\n    book.id = book._id;\n    return book;\n  } catch (e) {\n    console.error(e);\n    return e.message;\n  }\n}\n\nexport async function addBook(data) {\n  const userId = localStorage.getItem('userId');\n  const book = {\n    userId,\n    title: data.title,\n    author: data.author,\n    year: data.year,\n    genre: data.genre,\n    ratings: [{\n      userId,\n      grade: data.rating ? parseInt(data.rating, 10) : 0,\n    }],\n    averageRating: parseInt(data.rating, 10),\n  };\n  const bodyFormData = new FormData();\n  bodyFormData.append('book', JSON.stringify(book));\n  bodyFormData.append('image', data.file[0]);\n\n  try {\n    return await axios({\n      method: 'post',\n      url: `${API_ROUTES.BOOKS}`,\n      data: bodyFormData,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`,\n      },\n    });\n  } catch (err) {\n    console.error(err);\n    return { error: true, message: err.message };\n  }\n}\n\nexport async function updateBook(data, id) {\n  const userId = localStorage.getItem('userId');\n\n  let newData;\n  const book = {\n    userId,\n    title: data.title,\n    author: data.author,\n    year: data.year,\n    genre: data.genre,\n  };\n  console.log(data.file[0]);\n  if (data.file[0]) {\n    newData = new FormData();\n    newData.append('book', JSON.stringify(book));\n    newData.append('image', data.file[0]);\n  } else {\n    newData = { ...book };\n  }\n\n  try {\n    const newBook = await axios({\n      method: 'put',\n      url: `${API_ROUTES.BOOKS}/${id}`,\n      data: newData,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`,\n      },\n    });\n    return newBook;\n  } catch (err) {\n    console.error(err);\n    return { error: true, message: err.message };\n  }\n}\n","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Books\\BestRatedBooks\\BestRatedBooks.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Books\\BookItem\\BookItem.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Books\\BookInfo\\BookInfo.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Books\\BookRatingForm\\BookRatingForm.jsx",["193"],["194"],"import * as PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport styles from './BookRatingForm.module.css';\nimport { generateStarsInputs, displayStars } from '../../../lib/functions';\nimport { APP_ROUTES } from '../../../utils/constants';\nimport { useUser } from '../../../lib/customHooks';\nimport { rateBook } from '../../../lib/common';\n\nfunction BookRatingForm({\n  rating, setRating, userId, setBook, id, userRated,\n}) {\n  const { connectedUser, auth } = useUser();\n  const navigate = useNavigate();\n  const { register, formState, handleSubmit } = useForm({\n    mode: 'onChange',\n    defaultValues: {\n      rating: 0,\n    },\n  });\n  useEffect(() => {\n    if (formState.dirtyFields.rating) {\n      const rate = document.querySelector('input[name=\"rating\"]:checked').value;\n      setRating(parseInt(rate, 10));\n      formState.dirtyFields.rating = false;\n    }\n  }, [formState]);\n  const onSubmit = async () => {\n    if (!connectedUser || !auth) {\n      navigate(APP_ROUTES.SIGN_IN);\n    }\n    const update = await rateBook(id, userId, rating);\n    if (update) {\n      // eslint-disable-next-line no-underscore-dangle\n      setBook({ ...update, id: update._id });\n    } else {\n      alert(update);\n    }\n  };\n  return (\n    <div className={styles.BookRatingForm}>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <p>{rating > 0 ? 'Votre Note' : 'Notez cet ouvrage'}</p>\n        <div className={styles.Stars}>\n          {!userRated ? generateStarsInputs(rating, register) : displayStars(rating)}\n        </div>\n        {!userRated ? <button type=\"submit\">Valider</button> : null}\n      </form>\n    </div>\n  );\n}\n\nBookRatingForm.propTypes = {\n  rating: PropTypes.number.isRequired,\n  setRating: PropTypes.func.isRequired,\n  userId: PropTypes.string.isRequired,\n  setBook: PropTypes.func.isRequired,\n  id: PropTypes.string.isRequired,\n  userRated: PropTypes.bool.isRequired,\n};\n\nexport default BookRatingForm;\n","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Books\\BookForm\\BookForm.jsx",["195","196","197"],["198","199","200","201","202","203"],"/* eslint-disable react/jsx-props-no-spreading */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as PropTypes from 'prop-types';\nimport { useNavigate } from 'react-router-dom';\nimport { generateStarsInputs } from '../../../lib/functions';\nimport { useFilePreview } from '../../../lib/customHooks';\nimport addFileIMG from '../../../images/add_file.png';\nimport styles from './BookForm.module.css';\nimport { updateBook, addBook } from '../../../lib/common';\n\nfunction BookForm({ book, validate }) {\n  const userRating = book ? book.ratings.find((elt) => elt.userId === localStorage.getItem('userId'))?.grade : 0;\n\n  const [rating, setRating] = useState(0);\n\n  const navigate = useNavigate();\n  const {\n    register, watch, formState, handleSubmit, reset,\n  } = useForm({\n    defaultValues: useMemo(() => ({\n      title: book?.title,\n      author: book?.author,\n      year: book?.year,\n      genre: book?.genre,\n    }), [book]),\n  });\n  useEffect(() => {\n    reset(book);\n  }, [book]);\n  const file = watch(['file']);\n  const [filePreview] = useFilePreview(file);\n\n  useEffect(() => {\n    setRating(userRating);\n  }, [userRating]);\n\n  useEffect(() => {\n    if (!book && formState.dirtyFields.rating) {\n      const rate = document.querySelector('input[name=\"rating\"]:checked').value;\n      setRating(parseInt(rate, 10));\n      formState.dirtyFields.rating = false;\n    }\n  }, [formState]);\n\n  const onSubmit = async (data) => {\n    // When we create a new book\n    if (!book) {\n      if (!data.file[0]) {\n        alert('Vous devez ajouter une image');\n      }\n      const newBook = await addBook(data);\n      if (!newBook.error) {\n        validate(true);\n      } else {\n        alert(newBook.message);\n      }\n    } else {\n      const updatedBook = await updateBook(data, data.id);\n      if (!updatedBook.error) {\n        navigate('/');\n      } else {\n        alert(updatedBook.message);\n      }\n    }\n  };\n\n  const readOnlyStars = !!book;\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className={styles.Form}>\n      <input type=\"hidden\" id=\"id\" {...register('id')} />\n      <label htmlFor=\"title\">\n        <p>Titre du livre</p>\n        <input type=\"text\" id=\"title\" {...register('title')} />\n      </label>\n      <label htmlFor=\"author\">\n        <p>Auteur</p>\n        <input type=\"text\" id=\"author\" {...register('author')} />\n      </label>\n      <label htmlFor=\"year\">\n        <p>Année de publication</p>\n        <input type=\"text\" id=\"year\" {...register('year')} />\n      </label>\n      <label htmlFor=\"genre\">\n        <p>Genre</p>\n        <input type=\"text\" id=\"genre\" {...register('genre')} />\n      </label>\n      <label htmlFor=\"rate\">\n        <p>Note</p>\n        <div className={styles.Stars}>\n          {generateStarsInputs(rating, register, readOnlyStars)}\n        </div>\n      </label>\n      <label htmlFor=\"file\">\n        <p>Visuel</p>\n        <div className={styles.AddImage}>\n          {filePreview || book?.imageUrl ? (\n            <>\n              <img src={filePreview ?? book?.imageUrl} alt=\"preview\" />\n              <p>Modifier</p>\n            </>\n          ) : (\n            <>\n              <img src={addFileIMG} alt=\"Add file\" />\n              <p>Ajouter une image</p>\n            </>\n          )}\n\n        </div>\n        <input {...register('file')} type=\"file\" id=\"file\" />\n      </label>\n      <button type=\"submit\">Publier</button>\n    </form>\n  );\n}\n\nBookForm.propTypes = {\n  book: PropTypes.shape({\n    id: PropTypes.string,\n    _id: PropTypes.string,\n    userId: PropTypes.string,\n    title: PropTypes.string,\n    author: PropTypes.string,\n    year: PropTypes.number,\n    imageUrl: PropTypes.string,\n    genre: PropTypes.string,\n    ratings: PropTypes.arrayOf(PropTypes.shape({\n      userId: PropTypes.string,\n      grade: PropTypes.number,\n    })),\n    averageRating: PropTypes.number,\n  }),\n  validate: PropTypes.func,\n};\n\nBookForm.defaultProps = {\n  book: null,\n  validate: null,\n};\nexport default BookForm;\n","C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\lib\\functions.jsx",[],["204","205"],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\SignIn\\SignIn.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\Login\\Login.jsx",["206","207"],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\Forget\\Forget.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\RegisterSend\\RegisterSend.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\ForgetSend\\ForgetSend.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\DropdownMenu\\DropdownMenu.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\DropdownYear\\DropdownYear.jsx",["208"],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\BackArrow\\BackArrow.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\reportWebVitals.js",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\Forum\\Forum.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\AddBook\\AddBook.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\GenreSelector\\GenreSelector.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\Account\\Account.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\Modals\\ChangePass\\ChangePass.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\Home\\Home.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\components\\Books\\LastBook\\LastBook.jsx",[],[],"C:\\Users\\chokd\\Documents\\P3\\Projet7-Back-end\\frontend\\src\\pages\\Collection\\Collection.jsx",[],[],{"ruleId":"209","severity":2,"message":"210","line":13,"column":3,"nodeType":"211","messageId":"212","endLine":15,"endColumn":22,"suppressions":"213"},{"ruleId":"214","replacedBy":"215"},{"ruleId":"216","replacedBy":"217"},{"ruleId":"218","replacedBy":"219"},{"ruleId":"220","replacedBy":"221"},{"ruleId":"222","replacedBy":"223"},{"ruleId":"224","replacedBy":"225"},{"ruleId":"226","severity":1,"message":"227","line":55,"column":19,"nodeType":"228","messageId":"229","endLine":55,"endColumn":75},{"ruleId":"230","severity":2,"message":"231","line":55,"column":19,"nodeType":"232","messageId":"233","endLine":55,"endColumn":26,"suppressions":"234"},{"ruleId":"235","severity":1,"message":"236","line":32,"column":5,"nodeType":"237","messageId":"229","endLine":32,"endColumn":18},{"ruleId":"235","severity":1,"message":"236","line":47,"column":5,"nodeType":"237","messageId":"229","endLine":47,"endColumn":18},{"ruleId":"235","severity":1,"message":"236","line":63,"column":5,"nodeType":"237","messageId":"229","endLine":63,"endColumn":18},{"ruleId":"235","severity":1,"message":"236","line":76,"column":5,"nodeType":"237","messageId":"229","endLine":76,"endColumn":18},{"ruleId":"235","severity":1,"message":"236","line":89,"column":5,"nodeType":"237","messageId":"229","endLine":89,"endColumn":18},{"ruleId":"235","severity":1,"message":"236","line":111,"column":5,"nodeType":"237","messageId":"229","endLine":111,"endColumn":18},{"ruleId":"235","severity":1,"message":"236","line":144,"column":5,"nodeType":"237","messageId":"229","endLine":144,"endColumn":18},{"ruleId":"235","severity":1,"message":"236","line":160,"column":3,"nodeType":"237","messageId":"229","endLine":160,"endColumn":14},{"ruleId":"235","severity":1,"message":"236","line":180,"column":5,"nodeType":"237","messageId":"229","endLine":180,"endColumn":18},{"ruleId":"238","severity":2,"message":"239","line":8,"column":18,"nodeType":"237","messageId":"240","endLine":8,"endColumn":29,"suppressions":"241"},{"ruleId":"238","severity":2,"message":"239","line":60,"column":15,"nodeType":"237","messageId":"240","endLine":60,"endColumn":23,"suppressions":"242"},{"ruleId":"238","severity":2,"message":"239","line":108,"column":15,"nodeType":"237","messageId":"240","endLine":108,"endColumn":23,"suppressions":"243"},{"ruleId":"226","severity":1,"message":"244","line":38,"column":7,"nodeType":"228","messageId":"229","endLine":38,"endColumn":20},{"ruleId":"238","severity":2,"message":"239","line":36,"column":32,"nodeType":"237","messageId":"240","endLine":36,"endColumn":42,"suppressions":"245"},{"ruleId":"226","severity":1,"message":"244","line":50,"column":9,"nodeType":"228","messageId":"229","endLine":50,"endColumn":46},{"ruleId":"226","severity":1,"message":"244","line":56,"column":9,"nodeType":"228","messageId":"229","endLine":56,"endColumn":31},{"ruleId":"226","severity":1,"message":"244","line":63,"column":9,"nodeType":"228","messageId":"229","endLine":63,"endColumn":35},{"ruleId":"246","severity":2,"message":"247","line":71,"column":36,"nodeType":"248","messageId":"249","endLine":71,"endColumn":55,"suppressions":"250"},{"ruleId":"246","severity":2,"message":"247","line":74,"column":39,"nodeType":"248","messageId":"249","endLine":74,"endColumn":61,"suppressions":"251"},{"ruleId":"246","severity":2,"message":"247","line":78,"column":40,"nodeType":"248","messageId":"249","endLine":78,"endColumn":63,"suppressions":"252"},{"ruleId":"246","severity":2,"message":"247","line":82,"column":38,"nodeType":"248","messageId":"249","endLine":82,"endColumn":59,"suppressions":"253"},{"ruleId":"246","severity":2,"message":"247","line":86,"column":39,"nodeType":"248","messageId":"249","endLine":86,"endColumn":61,"suppressions":"254"},{"ruleId":"246","severity":2,"message":"247","line":110,"column":16,"nodeType":"248","messageId":"249","endLine":110,"endColumn":37,"suppressions":"255"},{"ruleId":"246","severity":2,"message":"247","line":26,"column":59,"nodeType":"248","messageId":"249","endLine":26,"endColumn":82,"suppressions":"256"},{"ruleId":"246","severity":2,"message":"247","line":33,"column":59,"nodeType":"248","messageId":"249","endLine":33,"endColumn":82,"suppressions":"257"},{"ruleId":"226","severity":1,"message":"244","line":31,"column":9,"nodeType":"228","messageId":"229","endLine":31,"endColumn":41},{"ruleId":"226","severity":1,"message":"244","line":37,"column":7,"nodeType":"228","messageId":"229","endLine":37,"endColumn":25},{"ruleId":"235","severity":1,"message":"236","line":35,"column":5,"nodeType":"237","messageId":"229","endLine":35,"endColumn":16},"react/jsx-filename-extension","JSX not allowed in files with extension '.js'","JSXElement","noJSXWithExtension",["258"],"lines-around-directive",["259"],"no-spaced-func",["260"],"global-require",[],"no-buffer-constructor",[],"no-new-require",[],"no-path-concat",[],"no-alert","Unexpected confirm.","CallExpression","unexpected","no-restricted-globals","Unexpected use of 'confirm'.","Identifier","defaultMessage",["261"],"no-console","Unexpected console statement.","MemberExpression","no-underscore-dangle","Unexpected dangling '_' in '_id'.","unexpectedUnderscore",["262"],["263"],["264"],"Unexpected alert.",["265"],"react/jsx-props-no-spreading","Prop spreading is forbidden","JSXSpreadAttribute","noSpreading",["266"],["267"],["268"],["269"],["270"],["271"],["272"],["273"],{"kind":"274","justification":"275"},"padding-line-between-statements","func-call-spacing",{"kind":"274","justification":"275"},{"kind":"274","justification":"275"},{"kind":"274","justification":"275"},{"kind":"274","justification":"275"},{"kind":"274","justification":"275"},{"kind":"274","justification":"275"},{"kind":"274","justification":"275"},{"kind":"274","justification":"275"},{"kind":"274","justification":"275"},{"kind":"274","justification":"275"},{"kind":"274","justification":"275"},{"kind":"274","justification":"275"},{"kind":"274","justification":"275"},"directive",""]