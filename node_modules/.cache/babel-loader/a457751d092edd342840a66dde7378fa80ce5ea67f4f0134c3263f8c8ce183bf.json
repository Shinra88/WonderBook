{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chokd\\\\Documents\\\\P3\\\\Projet7-Back-end\\\\frontend\\\\src\\\\Modals\\\\ChangePass\\\\ChangePass.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport styles from './ChangePass.module.css';\nimport { API_ROUTES } from '../../utils/constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChangePass(_ref) {\n  _s();\n  let {\n    onClose\n  } = _ref;\n  const [oldPassword, setOldPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [notification, setNotification] = useState({\n    error: false,\n    message: ''\n  });\n  const handleClickOutside = event => {\n    if (event.target.classList.contains(styles.modalBackground)) {\n      onClose(); // Ferme la modal au clic en dehors\n    }\n  };\n\n  const changePass = async () => {\n    if (newPassword !== confirmPassword) {\n      setNotification({\n        error: true,\n        message: 'Les mots de passe ne correspondent pas.'\n      });\n      return;\n    }\n    try {\n      setIsLoading(true);\n      const response = await axios.post(API_ROUTES.CHANGE_PASS, {\n        oldPassword,\n        newPassword\n      });\n      if (response.status !== 200) {\n        setNotification({\n          error: true,\n          message: 'Une erreur est survenue.'\n        });\n      } else {\n        setNotification({\n          error: false,\n          message: 'Mot de passe changé avec succès !'\n        });\n        onClose(); // Ferme la modal après validation\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setNotification({\n        error: true,\n        message: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Une erreur est survenue.'\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.modalBackground,\n    onClick: handleClickOutside,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.modalContent,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Changer le mot de passe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), notification.message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: notification.error ? styles.errorMessage : styles.successMessage,\n        children: notification.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"oldPassword\",\n        children: [\"Ancien mot de passe\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"oldPassword\",\n          value: oldPassword,\n          onChange: e => setOldPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"newPassword\",\n        children: [\"Nouveau mot de passe\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"newPassword\",\n          value: newPassword,\n          onChange: e => setNewPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"confirmPassword\",\n        children: [\"Confirmer mot de passe\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"confirmPassword\",\n          value: confirmPassword,\n          onChange: e => setConfirmPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.buttonContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: styles.cancelButton,\n          onClick: onClose,\n          children: \"Annuler\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: styles.confirmButton,\n          onClick: changePass,\n          disabled: isLoading,\n          children: isLoading ? 'Chargement...' : 'Valider'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(ChangePass, \"TTecE5r9Ispq5KoAQMbIt58URb0=\");\n_c = ChangePass;\nChangePass.propTypes = {\n  onClose: PropTypes.func.isRequired\n};\nexport default ChangePass;\nvar _c;\n$RefreshReg$(_c, \"ChangePass\");","map":{"version":3,"names":["React","useState","axios","PropTypes","styles","API_ROUTES","ChangePass","onClose","oldPassword","setOldPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","isLoading","setIsLoading","notification","setNotification","error","message","handleClickOutside","event","target","classList","contains","modalBackground","changePass","response","post","CHANGE_PASS","status","err","data","modalContent","errorMessage","successMessage","e","value","buttonContainer","cancelButton","confirmButton","propTypes","func","isRequired"],"sources":["C:/Users/chokd/Documents/P3/Projet7-Back-end/frontend/src/Modals/ChangePass/ChangePass.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport styles from './ChangePass.module.css';\nimport { API_ROUTES } from '../../utils/constants';\n\nfunction ChangePass({ onClose }) {\n  const [oldPassword, setOldPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [notification, setNotification] = useState({ error: false, message: '' });\n\n  const handleClickOutside = (event) => {\n    if (event.target.classList.contains(styles.modalBackground)) {\n      onClose(); // Ferme la modal au clic en dehors\n    }\n  };\n\n  const changePass = async () => {\n    if (newPassword !== confirmPassword) {\n      setNotification({ error: true, message: 'Les mots de passe ne correspondent pas.' });\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n      const response = await axios.post(API_ROUTES.CHANGE_PASS, {\n        oldPassword,\n        newPassword,\n      });\n\n      if (response.status !== 200) {\n        setNotification({ error: true, message: 'Une erreur est survenue.' });\n      } else {\n        setNotification({ error: false, message: 'Mot de passe changé avec succès !' });\n        onClose(); // Ferme la modal après validation\n      }\n    } catch (err) {\n      setNotification({ error: true, message: err.response?.data?.message || 'Une erreur est survenue.' });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className={styles.modalBackground} onClick={handleClickOutside}>\n      <div className={styles.modalContent}>\n        <h2>Changer le mot de passe</h2>\n\n        {notification.message && (\n          <div className={notification.error ? styles.errorMessage : styles.successMessage}>\n            {notification.message}\n          </div>\n        )}\n\n        <label htmlFor=\"oldPassword\">\n          Ancien mot de passe\n          <input\n            type=\"password\"\n            id=\"oldPassword\"\n            value={oldPassword}\n            onChange={(e) => setOldPassword(e.target.value)}\n          />\n        </label>\n\n        <label htmlFor=\"newPassword\">\n          Nouveau mot de passe\n          <input\n            type=\"password\"\n            id=\"newPassword\"\n            value={newPassword}\n            onChange={(e) => setNewPassword(e.target.value)}\n          />\n        </label>\n\n        <label htmlFor=\"confirmPassword\">\n          Confirmer mot de passe\n          <input\n            type=\"password\"\n            id=\"confirmPassword\"\n            value={confirmPassword}\n            onChange={(e) => setConfirmPassword(e.target.value)}\n          />\n        </label>\n\n        <div className={styles.buttonContainer}>\n          <button type=\"button\" className={styles.cancelButton} onClick={onClose}>\n            Annuler\n          </button>\n          <button type=\"submit\" className={styles.confirmButton} onClick={changePass} disabled={isLoading}>\n            {isLoading ? 'Chargement...' : 'Valider'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nChangePass.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default ChangePass;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}