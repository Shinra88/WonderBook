{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chokd\\\\Documents\\\\P3\\\\Projet7-Back-end\\\\frontend\\\\src\\\\Modals\\\\Login\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport styles from './Login.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login(_ref) {\n  _s();\n  let {\n    setUser,\n    onClose,\n    openRegister,\n    openForgetPassword\n  } = _ref;\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    const handleEscape = event => {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    };\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [onClose]);\n  const login = async () => {\n    try {\n      var _response$data;\n      setIsLoading(true);\n      const response = await axios.post('/api/login', {\n        email,\n        password\n      });\n      if (!(response !== null && response !== void 0 && (_response$data = response.data) !== null && _response$data !== void 0 && _response$data.token)) {\n        alert('Une erreur est survenue');\n      } else {\n        setUser(response.data);\n        onClose(); // Ferme la modal après connexion réussie\n      }\n    } catch (err) {\n      alert(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.Login,\n    onClick: e => e.target === e.currentTarget && onClose(),\n    onKeyDown: e => {\n      if (e.key === 'Enter' || e.key === ' ') onClose();\n    },\n    role: \"presentation\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.Form,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Connexion\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"email\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"E-mail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          value: email,\n          onChange: e => setEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Mot de passe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.Option,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: styles.LinkButton,\n          onClick: () => {\n            onClose();\n            openForgetPassword();\n          },\n          children: \"Mot de passe oubli\\xE9 ?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"ou\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: styles.LinkButton,\n          onClick: () => {\n            onClose();\n            openRegister();\n          },\n          children: \"Cr\\xE9er un compte\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.Submit,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: styles.Cancel,\n          onClick: onClose,\n          children: \"Annuler\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: styles.Validate,\n          onClick: login,\n          disabled: isLoading,\n          children: isLoading ? 'Chargement...' : 'Valider'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"ibdnZ1CmBPf0rl5NoL+m8Ib4SxY=\");\n_c = Login;\nLogin.propTypes = {\n  setUser: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  openRegister: PropTypes.func.isRequired,\n  openForgetPassword: PropTypes.func.isRequired\n};\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","axios","PropTypes","styles","Login","setUser","onClose","openRegister","openForgetPassword","email","setEmail","password","setPassword","isLoading","setIsLoading","handleEscape","event","key","document","addEventListener","removeEventListener","login","response","post","data","token","alert","err","message","e","target","currentTarget","Form","value","Option","LinkButton","Submit","Cancel","Validate","propTypes","func","isRequired"],"sources":["C:/Users/chokd/Documents/P3/Projet7-Back-end/frontend/src/Modals/Login/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport styles from './Login.module.css';\n\nfunction Login({ \n  setUser,\n  onClose,\n  openRegister,\n  openForgetPassword,\n}) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const handleEscape = (event) => {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    };\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [onClose]);\n\n  const login = async () => {\n    try {\n      setIsLoading(true);\n      const response = await axios.post('/api/login', { email, password });\n      if (!response?.data?.token) {\n        alert('Une erreur est survenue');\n      } else {\n        setUser(response.data);\n        onClose(); // Ferme la modal après connexion réussie\n      }\n    } catch (err) {\n      alert(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div\n      className={styles.Login}\n      onClick={(e) => e.target === e.currentTarget && onClose()}\n      onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') onClose(); }}\n      role=\"presentation\"\n    >\n      <div className={styles.Form}>\n        <h2>Connexion</h2>\n        <label htmlFor=\"email\">\n          <p>E-mail</p>\n          <input\n            type=\"email\"\n            id=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </label>\n        <label htmlFor=\"password\">\n          <p>Mot de passe</p>\n          <input\n            type=\"password\"\n            id=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </label>\n        <div className={styles.Option}>\n          <button type=\"button\" className={styles.LinkButton} onClick={() => { onClose(); openForgetPassword(); }}>\n            Mot de passe oublié ?\n          </button>\n          <p>ou</p>\n          <button type=\"button\" className={styles.LinkButton} onClick={() => { onClose(); openRegister(); }}>\n            Créer un compte\n          </button>\n        </div>\n        <div className={styles.Submit}>\n          <button type=\"button\" className={styles.Cancel} onClick={onClose}>\n            Annuler\n          </button>\n          <button type=\"submit\" className={styles.Validate} onClick={login} disabled={isLoading}>\n            {isLoading ? 'Chargement...' : 'Valider'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nLogin.propTypes = {\n  setUser: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  openRegister: PropTypes.func.isRequired,\n  openForgetPassword: PropTypes.func.isRequired,\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}