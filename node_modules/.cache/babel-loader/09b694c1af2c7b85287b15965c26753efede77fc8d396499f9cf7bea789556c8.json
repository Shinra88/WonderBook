{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chokd\\\\Documents\\\\P3\\\\Projet7-Back-end\\\\frontend\\\\src\\\\Modals\\\\Forget\\\\Forget.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport styles from './Forget.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Forget(_ref) {\n  _s();\n  let {\n    setUser,\n    onClose\n  } = _ref;\n  const [email, setEmail] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [notification, setNotification] = useState({\n    error: false,\n    message: ''\n  });\n  useEffect(() => {\n    const handleEscape = event => {\n      if (event.key === 'Escape' && onClose) {\n        onClose();\n      }\n    };\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [onClose]);\n  const forget = async () => {\n    try {\n      var _response$data;\n      setIsLoading(true);\n      const response = await axios.post('/api/forget-password', {\n        email\n      });\n      if (!(response !== null && response !== void 0 && (_response$data = response.data) !== null && _response$data !== void 0 && _response$data.success)) {\n        setNotification({\n          error: true,\n          message: 'Une erreur est survenue'\n        });\n      } else {\n        setNotification({\n          error: false,\n          message: 'Un email de réinitialisation a été envoyé.'\n        });\n      }\n    } catch (err) {\n      setNotification({\n        error: true,\n        message: err.message\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.modalBackground,\n    onClick: e => {\n      if (e.target.classList.contains(styles.modalBackground) && onClose) {\n        onClose();\n      }\n    },\n    role: \"button\",\n    tabIndex: 0,\n    onKeyDown: e => {\n      if ((e.key === 'Enter' || e.key === 'Escape') && onClose) {\n        onClose();\n      }\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.modalContent,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Mot de passe oubli\\xE9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), notification.message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: notification.error ? styles.errorMessage : styles.successMessage,\n        children: notification.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"email\",\n        children: [\"E-mail\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          id: \"email\",\n          value: email,\n          onChange: e => setEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.buttonContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: styles.cancelButton,\n          onClick: onClose,\n          children: \"Annuler\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: styles.validateButton,\n          onClick: forget,\n          disabled: isLoading,\n          children: isLoading ? 'Chargement...' : 'Valider'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(Forget, \"QW1HBfHSjAIk3b7FqWt9vVFVzxk=\");\n_c = Forget;\nForget.propTypes = {\n  setUser: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\nexport default Forget;\nvar _c;\n$RefreshReg$(_c, \"Forget\");","map":{"version":3,"names":["React","useState","useEffect","axios","PropTypes","styles","Forget","setUser","onClose","email","setEmail","isLoading","setIsLoading","notification","setNotification","error","message","handleEscape","event","key","document","addEventListener","removeEventListener","forget","response","post","data","success","err","modalBackground","e","target","classList","contains","modalContent","errorMessage","successMessage","value","buttonContainer","cancelButton","validateButton","propTypes","func","isRequired"],"sources":["C:/Users/chokd/Documents/P3/Projet7-Back-end/frontend/src/Modals/Forget/Forget.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport styles from './Forget.module.css';\n\nfunction Forget({ setUser, onClose }) {\n  const [email, setEmail] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [notification, setNotification] = useState({ error: false, message: '' });\n\n  useEffect(() => {\n    const handleEscape = (event) => {\n      if (event.key === 'Escape' && onClose) {\n        onClose();\n      }\n    };\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [onClose]);\n\n  const forget = async () => {\n    try {\n      setIsLoading(true);\n      const response = await axios.post('/api/forget-password', { email });\n\n      if (!response?.data?.success) {\n        setNotification({ error: true, message: 'Une erreur est survenue' });\n      } else {\n        setNotification({ error: false, message: 'Un email de réinitialisation a été envoyé.' });\n      }\n    } catch (err) {\n      setNotification({ error: true, message: err.message });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div\n      className={styles.modalBackground}\n      onClick={(e) => {\n        if (e.target.classList.contains(styles.modalBackground) && onClose) {\n          onClose();\n        }\n      }}\n      role=\"button\"\n      tabIndex={0}\n      onKeyDown={(e) => {\n        if ((e.key === 'Enter' || e.key === 'Escape') && onClose) {\n          onClose();\n        }\n      }}\n    >\n      <div className={styles.modalContent}>\n        <h2>Mot de passe oublié</h2>\n\n        {notification.message && (\n          <div className={notification.error ? styles.errorMessage : styles.successMessage}>\n            {notification.message}\n          </div>\n        )}\n\n        <label htmlFor=\"email\">\n          E-mail\n          <input\n            type=\"email\"\n            name=\"email\"\n            id=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </label>\n\n        <div className={styles.buttonContainer}>\n          <button type=\"button\" className={styles.cancelButton} onClick={onClose}>\n            Annuler\n          </button>\n          <button type=\"button\" className={styles.validateButton} onClick={forget} disabled={isLoading}>\n            {isLoading ? 'Chargement...' : 'Valider'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nForget.propTypes = {\n  setUser: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default Forget;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}